<!DOCTYPE html>
<html>
  <head>
  	<script src="jatos.js"></script>
	<script src="shared_assets/jspsych-6.1/jspsych.js"></script>
	<script src="shared_assets/js/instructions.js"></script>
	
    <script src="shared_assets/jspsych-6.1/plugins/jspsych-survey-text.js"></script>
    <script src="shared_assets/jspsych-6.1/plugins/jspsych-html-keyboard-response.js"></script>
    
   	<script src="shared_assets/js/survey-yes-no.js"></script>
    <script src="shared_assets/js/survey-text-custom.js"></script>
    <script src="shared_assets/js/familymember-info.js"></script>
    <script src="shared_assets/js/othermember-info.js"></script>
    <script src="shared_assets/js/gender-info.js"></script>
    <script src="shared_assets/js/music-info.js"></script>
    <script src="shared_assets/js/validators.js"></script>
    
    <link href="shared_assets/stylesheet.css" rel="stylesheet" />
	<link href="shared_assets/jspsych-6.1/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body></body>
  <script>
 /*NOTE: add numbers at beginning of each question that correspond with the question numbers in the parent guide */
 
var header = "<img id=\"logo\" src=\"shared_assets/img/langdev-logo.jpg\"</img><h1>Language Learning & Development Lab Parent Questionnaire</h1>"; //to be prepended to preludes

var image = "<img id=\"logo\" src=\"shared_assets/img/example.jpg\"</img>";

  var name_country = {
    type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2>" +
    ' All of the questions asked in Section 2 refer to the <b>CHILD PARTICIPATING IN THE STUDY</b>.',
    json_label: 'Child Name & Birth Country',
    questions: [
        {prompt: "Please enter your child's name."},
        {prompt: "Please enter your child's birth country."}
        ],
    on_load: function () {
        validate_childnamecountry();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_childnamecountry);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_childnamecountry);
    }
};

 var langdom_langacq = {
 	type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2>",
    json_label: 'Language Dominance & Order of Acquisition',
    questions: [
        {prompt: "2.1 Please list all the languages your child knows/is learning in order of <b>dominance</b> (your child’s most dominant language first), separated by semicolons. <br>Example: English; French (where English is the most dominant, and French is the least dominant)"},
        {prompt: "2.2 Please list all the languages your child knows/is learning in order of <b>acquisition</b>. Please also indicate if the language(s) is/are your child’s native language(s), separated by semicolons. <br>Example: English (Native); French"}, 
        ],
    on_load: function () {
        validate_languagedomacq();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_languagedomacq);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_languagedomacq);
    }
};

 var disabilities = {
 	type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2>",
    json_label: 'Disabilities',
    questions: [
            {prompt: '2.3 Please indicate whether your child has any of the following disabilities: vision impairment, language disability, hearing impairment and/or learning disability?' +
            ' <br>If yes, please add a bit more detail below (including any corrections or therapy) <br>Example: Hearing impairment (hearing aid)'}, 
            ],
    on_load: function () {
        validate_disabilities();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_disabilities);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_disabilities);
    }
};


  var daycare = {
 	type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2>",
    json_label: 'Daycare/School',
    questions: [
            {prompt: '2.4 Does your child attend daycare, kindergarten/nursery, or school?' +
      ' If yes, how many hours/week and which languages are spoken there? <br>For instance, if Chidi attends an English and French speaking daycare 5 hours a week, their entry would be: 5 hours/week; English & French.'}, 
            ],
    on_load: function () {
        validate_daycare();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_daycare);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_daycare);
    }
};
    
      var extracurr = {
 	type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2>",
    json_label: 'Extra-curricular',
    questions: [
            {prompt: '2.5 Does your child attend any evening/weekend language or extra-curricular programs?' +
      ' If yes, how often and which languages are spoken there? <br>For instance, if Chidi attends an English speaking extra-curricular program twice a week, their entry would be: Twice a week; English.'}, 
            ],
    on_load: function () {
        validate_extracurricular();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_extracurricular);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_extracurricular);
    }
};

var family_languageexposure = {
    type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2> <b> Family Language Exposure Part 1 </b> <br>2.6 Please list the family members who talk to the child at least once a week and indicate which language(s) each person listed below speaks around your child." + 
      ' If a person speaks a language(s) other than English with your child, please list this/these languages. <br>' +
      ' <br> <i><b>Example:</b> If Chidi is spoken to by his mother who speaks English and French, <br> is spoken to by grandmother who speaks French, <br>and is spoken to by their brother who speaks English and French, <br>their entries would be: <br> Mother: English; French, Grandmother: French, Brother: English; French</i> <br>' +
      ' <br> On the next page, you will be asked the proportion of English that each person speaks to your child and average amount of hours they spend with your child.',
      json_label: 'Family Language Exposure',
    questions: [
        {prompt: "Family Member 1"},
        {prompt: "Family Member 2"},
        {prompt: "Family Member 3"},
        {prompt: "Family Member 4"},
        {prompt: "Family Member 5"},
        {prompt: "Family Member 6"},
        {prompt: "Family Member 7"},
        {prompt: "Family Member 8"}
    ],
    on_load: function () {
        validate_family_languageexposure();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_family_languageexposure);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_family_languageexposure);
    }

};

var family_languagedetails = {
    type: 'familymember-info',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2> <b> Family Language Exposure Part 2 </b> <br>Under <b>'Proportion Spoken'</b>, on a scale from 1-7, please indicate how much they speak this language(s) to your child." +
       " <br> 1 means the person uses only English to speak to the child, 4 means they use half English and half the other language, whereas 7 means that the person only uses another language.<br>" +
       " <br> <i><b>Example:</b> If Chidi's mother speaks mainly English and some French, <br>grandmother speaks both English and French <br>and brother speaks only English to him, <br>their entries would be: Mother: 2; Grandmother: 4; Brother: 1.</i><br>" +
       " <br> Under <b>'Hours Spent'</b>, please list the hours each person spends with the child on an average weekday (Monday - Friday) and an average weekend day (Saturday/Sunday). Please do not include the time the child spends sleeping. <br>" +
       " <br> <i><b>Example:</b> Mother: 10 hours/weekday; 10 hours/weekend; Grandmother: 2 hours/weekday; 2 hours/weekend; Brother: 12 hours/weekday; 12 hours/weekend</i><br>",
    member: ['temp'],
    json_label: 'Family Language Details',
    on_start: function (trial) {
        trial.member = get_known_member();
    },
    on_load: function () {
        validate_family_languagedetails();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_family_languagedetails);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_family_languagedetails);
    }
};

var other_languageexposure = {
    type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2> <b> Other Individual Language Exposure Part 1</b> <br> 2.6 Please list any individuals in your environment who talk to the child at least once a week and indicate which language(s) each person listed below speaks around your child." + 
      ' If a person speaks a language(s) other than English with your child, please list this/these languages.<br>' +
      ' <br> <i><b>Example:</b> If Chidi is spoken to by his teacher who speaks English and daycare giver who speaks English and French, their entries would be:' +
        ' Teacher: English; Daycare caregiver: English; French</i><br>' +
        ' <br> On the next page, you will be asked the proportion of English that each person speaks to your child and average amount of hours they spend with your child.',
    json_label: 'Other Language Exposure',
    questions: [
        {prompt: "Individual 1"},
        {prompt: "Individual 2"},
        {prompt: "Individual 3"},
        {prompt: "Individual 4"},
        {prompt: "Individual 5"},
        {prompt: "Individual 6"},
        {prompt: "Individual 7"},
        {prompt: "Individual 8"}
    ],
    on_load: function () {
        validate_other_languageexposure();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_other_languageexposure);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_other_languageexposure);
    }

};

var other_languagedetails = {
    type: 'othermember-info',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2> <b> Other Individual Language Exposure Part 2</b> <br> Under <b>'Proportion Spoken'</b>, on a scale from 1-7, please indicate how much they speak this language(s) to your child." +
       "<br> 1 means the person uses only English to speak to the child, 4 means they use half English and half the other language, whereas 7 means that the person only uses another language.<br>" +
      "<br> <i><b>Example</b>: If Chidi is spoken to by his teacher in all English, but is spoken to in English and French by his daycare giver, their entries would be: Teacher: 1; Daycare giver: 4</i><br>" +
       "<br> Under <b>'Hours Spent'</b>, please list the hours each person spends with the child on an average weekday (Monday - Friday) and an average weekend day (Saturday/Sunday). Please do not include the time the child spends sleeping. </br>" +
      " <br> <i><b>Example:</b> Teacher: 8 hours/weekday; 0 hours/weekend; Daycare caregiver: 2 hours/weekday; 0 hours/weekend</i></br>",
    members: ['temp'],
    json_label: 'Other Language Details',
    on_start: function (trial) {
        trial.members = get_known_members();
    },
    on_load: function () {
        validate_other_languagedetails();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_other_languagedetails);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_other_languagedetails);
    }
};

 var section2_page7 = {
 	type: 'survey-text-custom',
    preamble: header + "<h2>SECTION 2: LANGUAGE BACKGROUND ASSESSMENT</h2> 2.8 Please specify the proportion of English (in percentages) that your child hears during each activity listed below." +
      " Again, if your child hears language(s) other than English, please list the appropriate languages below each activity." +
      " <br> Please specify the approximate number of hours your child spends each weekday (Monday - Friday) and weekend (Saturday/Sunday) participating in these activities, separated by semicolons. Please do not include the time the child spends sleeping. </br>" +
        "<br> <i><b>Example</b>: <br> 1. Listening to the radio: English; 100%; 2 hours/weekday; 2 hours/weekend <br> 2. Listening to music: French & English; 50%; 10 hours/weekday; 10 hours/weekend <br> 3. Watching TV/videos: N/A <br> 4. Reading stories to child: N/A</i>",
    json_label: 'Additional Language Exposure & Hours Spent',
    questions: [
        {prompt: "1. Listening to the radio"},
        {prompt: "2. Listening to music"},
        {prompt: "3. Watching TV/videos"},
        {prompt: "4. Reading stories to child"}
        ],
    on_load: function () {
        validate_addlanguage();
        form = document.getElementById("jspsych-content");
        toggle_listeners(form, true, validate_addlanguage);
    },
    on_finish: function () {
        toggle_listeners(form, false, validate_addlanguage);
    }
};

    var section2_over = {
    type: 'instructions',
    pages: [
        header + "Section 2 of the parent questionnaire is over." +
          "</p>Click <i>next</i> to begin section 3 of the parent questionnaire.<p>"
    ],
    show_clickable_nav: true,
    button_label_next: 'Next',
    button_label_previous: 'Back',
    allow_keys: false
}

	jatos.onLoad(function() {
var studyID = jatos.studyResultId;  // creates a study ID for debrief & RPS purposes
jsPsych.data.addProperties({subject : studyID});     // adds study ID to results data //

  jsPsych.init({
  // timeline: [name_country, langdom_langacq, disabilities, daycare, extracurr, family_languageexposure, family_languagedetails, other_languageexposure, other_languagedetails, section2_page7, section2_over]
    timeline: [name_country, langdom_langacq, disabilities, daycare, extracurr, family_languageexposure, family_languagedetails, other_languageexposure, other_languagedetails, section2_page7, section2_over],
    show_progress_bar: true,
   on_finish: function (data) {
            var studyID = jatos.studyResultId;
            jsPsych.data.addProperties({subject : studyID});
            var resultsRaw = jsPsych.data.get();
            var results = resultsRaw.ignore('internal_node_id').ignore('time_elapsed').ignore('key_press').ignore('question_order').ignore('stimulus');
            var resultsCSV = results.csv();
            jatos.submitResultData(resultsCSV, jatos.startNextComponent);
            },
  })
  });

  </script>
</html>
