<!DOCTYPE html>
<html>
    <head>
        <title>LangDev Recal</title>
        <script src="jatos.js"></script>
        <script src="jspsych-6.1/jspsych.js"></script>
        <script src="jspsych-6.1/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="jspsych-6.1/plugins/jspsych-audio-keyboard-response.js"></script>
        <script src="jspsych-6.1/plugins/jspsych-video-keyboard-response.js"></script>
        <script src="shared_assets/js/instructions.js"></script>
        <link href="shared_assets/stylesheet.css" rel="stylesheet" type="text/css"/>
        <link href="jspsych-6.1/css/jspsych.css" rel="stylesheet" type="text/css"/>
    </head>
    <body></body>
    <script>

    var header = "<img id=\"logo\" src=\"shared_assets/img/langdev-logo.jpg\"</img>"; //to be prepended to preludes

    // create timeline //
    var timeline = [];

// create a jatos wrapper so you can run this study in jatos && access paramters from jatos //
jatos.onLoad(function() {
var condition = jatos.urlQueryParameters.condition;   // accesses condition number from the URL
var studyID = jatos.studyResultId;  // creates a study ID for debrief & RPS purposes
jsPsych.data.addProperties({subject : studyID});     // adds study ID to results data //
jsPsych.data.addProperties({condition : condition});   // adds condition to results data

// VERSION 4 UPDATE: ADDING PERCEPTION OF TRAINING TEST TRIALS
var perception_instructions = {
type: "instructions",
pages: [
	'<h2><b> Section 2: Instructions </b></h2> <p>You will now only be presented videos, during which you will be asked to silently articulate a sound in sync with the face in the video.</p>' +
	' <p>After each video, please respond with what sound you perceived by pressing the left arrow key for <b>ABA</b> or right arrow key for <b>ADA</b>.</p>' +
	' <p>You will get four practice trials.</p> <p>Click <i> next </i> to start the practice trials.</p>',
],
data: {test_part: 'instructions'},
show_clickable_nav: true,
	button_label_next: 'Next',
	allow_keys: false,
timing_post_trial: 8000
};

// instructions for saying ABA //
var say_ABA = {
        type: 'html-keyboard-response',
        data: {test_part: 'instructions', blocktype: 'ABA'},
        stimulus: '<p>Please silently mouth <b>ABA</b> in sync with the following videos.</p>' +
        '<p>Press the spacebar or enter key to begin.</p>',
        choices: ['spacebar', 'enter']
    }

// instructions for saying ADA //
var say_ADA = {
    type: 'html-keyboard-response',
    data: {test_part: 'instructions', blocktype: 'ADA'},
    stimulus: '<p>Please silently mouth <b>ADA</b> in sync with the following videos.</p>' +
    '<p>Press the spacebar or enter key to begin.</p>',
    choices: ['spacebar', 'enter']
  }


  // instructions for breaks: rest //
  var rest = {
    type: 'instructions',
      pages: [
        '<h2>Break time!</h2> <p> Section 1 of the study is now over. <p> Feel free to do as you like, but please stay on this screen.</p><p> Click <i>next</i> to begin Section 2 when you are ready.</p>',
    ],
    data: {test_part: 'instructions'},
      show_clickable_nav: true,
      button_label_next: 'Next',
      allow_keys: false
  };
  
      /* begin test trials screen */
    var begintest = {
        type: 'instructions',
        pages: ['The test trials will now begin. Click <i>next</i> to continue.'],
        data: {test_part: 'instructions'},
        show_clickable_nav: true,
        allow_keys: false
    }

// condition 4
var video_stimuli4_con4ABA = [
      { sources: ['video/VbA4.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA4'}},
    ];

var video_stimuli4_con4ADA = [
      { sources: ['video/VdA4.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA4'}},
    ];

var video_stimuli4_incon4ABA = [
      { sources: ['video/VbA4.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA4'}}
    ];

var video_stimuli4_incon4ADA = [
      { sources: ['video/VdA4.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA4'}},
    ];    


var videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var responseDR = {
          type: "html-keyboard-response",
          stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var percon4ABA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli4_con4ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var percon4ADA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli4_con4ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon4ABA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli4_incon4ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon4ADA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli4_incon4ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

// condition 5
var video_stimuli5_con5ABA = [
      { sources: ['video/VbA5.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA5'}},
    ];

var video_stimuli5_con5ADA = [
      { sources: ['video/VdA5.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA5'}},
    ];

var video_stimuli5_incon5ABA = [
      { sources: ['video/VbA5.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA5'}}
    ];

var video_stimuli5_incon5ADA = [
      { sources: ['video/VdA5.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA5'}},
    ]; 


var videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var responseDR = {
          type: "html-keyboard-response",
         stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var percon5ABA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli5_con5ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var percon5ADA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli5_con5ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon5ABA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli5_incon5ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon5ADA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli5_incon5ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }


// condition 6
var video_stimuli6_con6ABA = [
      { sources: ['video/VbA6.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA6'}},
    ];

var video_stimuli6_con6ADA = [
      { sources: ['video/VdA6.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA6'}},
    ];

var video_stimuli6_incon6ABA = [
      { sources: ['video/VbA6.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA6'}}
    ];

var video_stimuli6_incon6ADA = [
      { sources: ['video/VdA6.mp4'], data: {test_part: 'perception', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA6'}},
    ]; 



var videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var responseDR = {
          type: "html-keyboard-response",
          stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var percon6ABA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli6_con6ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var percon6ADA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli6_con6ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon6ABA = {
              timeline: [say_ADA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli6_incon6ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var perincon6ADA = {
              timeline: [say_ABA, videoDR, responseDR], // alternates the audio trial and response trial
              timeline_variables: video_stimuli6_incon6ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

// practice trials

// condition 4
var p_video_stimuli4_con4ABA = [
      { sources: ['video/VbA4.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA4'}},
    ];

var p_video_stimuli4_con4ADA = [
      { sources: ['video/VdA4.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA4'}},
    ];

var p_video_stimuli4_incon4ABA = [
      { sources: ['video/VbA4.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA4'}}
    ];

var p_video_stimuli4_incon4ADA = [
      { sources: ['video/VdA4.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA4'}},
    ];    


var p_videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var p_responseDR = {
          type: "html-keyboard-response",
          stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var p_percon4ABA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli4_con4ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var p_percon4ADA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli4_con4ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon4ABA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli4_incon4ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon4ADA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli4_incon4ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

// condition 5
var p_video_stimuli5_con5ABA = [
      { sources: ['video/VbA5.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA5'}},
    ];

var p_video_stimuli5_con5ADA = [
      { sources: ['video/VdA5.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA5'}},
    ];

var p_video_stimuli5_incon5ABA = [
      { sources: ['video/VbA5.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA5'}}
    ];

var p_video_stimuli5_incon5ADA = [
      { sources: ['video/VdA5.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA5'}},
    ]; 


var p_videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var p_responseDR = {
          type: "html-keyboard-response",
         stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var p_percon5ABA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli5_con5ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var p_percon5ADA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli5_con5ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon5ABA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli5_incon5ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon5ADA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli5_incon5ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }


// condition 6
var p_video_stimuli6_con6ABA = [
      { sources: ['video/VbA6.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'congruent', level: 'VbA6'}},
    ];

var p_video_stimuli6_con6ADA = [
      { sources: ['video/VdA6.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'congruent', level: 'VdA6'}},
    ];

var p_video_stimuli6_incon6ABA = [
      { sources: ['video/VbA6.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ABA', congruency: 'incongruent', level: 'VbA6'}}
    ];

var p_video_stimuli6_incon6ADA = [
      { sources: ['video/VdA6.mp4'], data: {test_part: 'practice', dresponse: 'DR', blocktype: 'ADA', congruency: 'incongruent', level: 'VdA6'}},
    ]; 



var p_videoDR = {
      type: "video-keyboard-response",
      sources: jsPsych.timelineVariable('sources'),
      choices: jsPsych.NO_KEYS,
      trial_ends_after_video: true
    }

    var p_responseDR = {
          type: "html-keyboard-response",
          stimulus: "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:left';'><b>ABA</b></div>" +
          "<div style='font-size:25px';'><div style='width: 500px;'><div style='float:right';'><b>ADA</b></div>",
          choices: ['leftarrow', 'rightarrow'],
          response_ends_trial: true,
          trial_duration: null,
          data: jsPsych.timelineVariable('data'), // this should add the 'level' data to the response trial (look at how stimuli is tagged "data")
          on_finish: function(data){ //this should add 'resp' column, converting key_press output 37,39 to 0,1 respectively
            if (data.key_press == 37) {
              data.resp = 0;
            } else if (data.key_press == 39) {
              data.resp = 1;
            }
          }
        }

        var p_percon6ABA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli6_con6ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

		var p_percon6ADA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli6_con6ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon6ABA = {
              timeline: [say_ADA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli6_incon6ABA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }
        
        var p_perincon6ADA = {
              timeline: [say_ABA, p_videoDR, p_responseDR], // alternates the audio trial and response trial
              timeline_variables: p_video_stimuli6_incon6ADA, // takes stimuli from "audio_stimuli"
              randomize_order: true // randomize order of trials
            }

timeline.push(rest, perception_instructions);

if(condition == 4){
  timeline.push(
    p_percon4ADA, p_percon4ABA, p_perincon4ABA, p_perincon4ADA
)}

if(condition == 5){
  timeline.push(
    p_percon5ADA, p_percon5ABA, p_perincon5ABA, p_perincon5ADA
)}

if(condition == 6){
  timeline.push(
    p_percon6ADA, p_percon6ABA, p_perincon6ABA, p_perincon6ADA
)}

timeline.push(begintest)

if(condition == 4){
randomint = Math.floor(Math.random()*110);

if(randomint > 100){
  timeline.push(
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    )
} else if(randomint > 90){
  timeline.push(
  	percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA,
    perincon4ADA, perincon4ABA, percon4ABA, percon4ADA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA,
    percon4ADA, percon4ADA, perincon4ABA, perincon4ADA, percon4ABA, percon4ABA, perincon4ADA, perincon4ABA,
    percon4ADA, perincon4ADA, perincon4ABA, percon4ABA, perincon4ADA, percon4ABA, perincon4ABA, percon4ADA,
    );
} else if(randomint > 80){
  timeline.push(
  	perincon4ADA, percon4ABA, perincon4ABA, percon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    percon4ABA, percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA, perincon4ABA, percon4ABA, percon4ADA,
    percon4ADA, percon4ADA, perincon4ADA, percon4ABA, percon4ADA, perincon4ABA, perincon4ABA, perincon4ADA,
    percon4ABA, percon4ABA, perincon4ADA, perincon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA,
    );
} else if(randomint > 70){
  timeline.push(
  	perincon4ADA, percon4ABA, perincon4ABA, percon4ADA, percon4ABA, percon4ABA, perincon4ADA, perincon4ABA,
    perincon4ADA, perincon4ABA, percon4ABA, percon4ADA, percon4ADA, percon4ABA, perincon4ABA, perincon4ADA,
    percon4ABA, percon4ADA, perincon4ADA, perincon4ABA, percon4ADA, perincon4ADA, perincon4ABA, percon4ABA,
    perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, percon4ADA, percon4ADA, perincon4ABA, perincon4ADA,
    );
} else if(randomint > 60){
  timeline.push(
  	perincon4ADA, perincon4ABA, percon4ABA, percon4ADA, percon4ABA, percon4ABA, perincon4ADA, perincon4ABA,
    percon4ADA, perincon4ABA, perincon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA,
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA,
    percon4ADA, percon4ADA, perincon4ABA, perincon4ADA, perincon4ADA, percon4ABA, perincon4ABA, percon4ADA,   
    );
} else if(randomint > 50){
  timeline.push(
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA,
    percon4ABA, percon4ABA, perincon4ADA, perincon4ABA, percon4ADA, perincon4ABA, perincon4ADA, perincon4ADA,
    perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, perincon4ADA, percon4ABA, perincon4ABA, percon4ADA,
    percon4ADA, percon4ADA, perincon4ABA, perincon4ADA, percon4ABA, perincon4ABA, percon4ABA, percon4ADA,    
    );
} else if(randomint > 40){
  timeline.push(
  	perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA,
    perincon4ADA, percon4ABA, perincon4ABA, percon4ADA, percon4ABA, percon4ABA, perincon4ADA, perincon4ABA,
    percon4ADA, percon4ADA, perincon4ABA, percon4ABA, perincon4ADA, perincon4ABA, percon4ABA, percon4ADA,    
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA,
    );
} else if(randomint > 30){
  timeline.push(
  	percon4ABA, percon4ABA, perincon4ADA, perincon4ABA, percon4ADA, percon4ADA, perincon4ABA, perincon4ADA,
	percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA, percon4ABA, percon4ABA, perincon4ABA, percon4ADA,
    percon4ABA, percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA, perincon4ABA, percon4ABA, percon4ADA,
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA,
    );
} else if(randomint > 20){
  timeline.push(
  	percon4ABA, percon4ABA, perincon4ADA, perincon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA,
    percon4ADA, percon4ABA, perincon4ABA, percon4ABA, perincon4ADA, percon4ABA, perincon4ABA, percon4ADA,
    percon4ADA, percon4ADA, perincon4ABA, perincon4ADA, percon4ABA, percon4ADA, perincon4ADA, perincon4ABA,
    percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA, perincon4ADA, perincon4ABA, percon4ABA, percon4ADA,
    );
} else if(randomint > 10){
  timeline.push(
    percon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA, perincon4ABA, perincon4ADA, percon4ABA,
    perincon4ABA, percon4ADA, percon4ADA, percon4ADA, perincon4ADA, perincon4ABA, perincon4ADA, perincon4ADA,
    percon4ADA, percon4ABA,  percon4ADA, perincon4ADA, perincon4ABA, perincon4ABA, percon4ABA, percon4ADA,
    percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, percon4ABA, percon4ABA, perincon4ADA, perincon4ABA,
    );
} else if(randomint > 0){
  timeline.push(
    percon4ADA, percon4ABA,  percon4ADA, perincon4ADA, perincon4ABA, perincon4ABA, percon4ABA, percon4ADA,
    percon4ABA, perincon4ABA, perincon4ADA, percon4ADA, perincon4ADA, percon4ABA, perincon4ADA, perincon4ABA,
    perincon4ABA, percon4ADA, percon4ADA, percon4ADA, perincon4ADA, perincon4ABA, percon4ABA, perincon4ADA,
    percon4ADA, percon4ABA, perincon4ABA, percon4ABA, perincon4ADA, perincon4ABA, perincon4ADA, percon4ABA,   
    );
}
}
 

if(condition == 5){
randomint = Math.floor(Math.random()*110);

if(randomint > 100){
  timeline.push(
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA,
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA,
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA,
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA,
    )
} else if(randomint > 90){
  timeline.push(
  	percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA,
    perincon5ADA, perincon5ABA, percon5ABA, percon5ADA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA,
    percon5ADA, percon5ADA, perincon5ABA, perincon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    percon5ADA, perincon5ADA, perincon5ABA, percon5ABA, perincon5ADA, percon5ABA, perincon5ABA, percon5ADA,
    );
} else if(randomint > 80){
  timeline.push(
  	perincon5ADA, percon5ABA, perincon5ABA, percon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA,
    percon5ABA, percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, perincon5ABA, percon5ABA, percon5ADA,
    percon5ADA, percon5ADA, perincon5ADA, percon5ABA, percon5ADA, perincon5ABA, perincon5ABA, perincon5ADA,
    percon5ABA, percon5ABA, perincon5ADA, perincon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA,
    );
} else if(randomint > 70){
  timeline.push(
  	perincon5ADA, percon5ABA, perincon5ABA, percon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    perincon5ADA, perincon5ABA, percon5ABA, percon5ADA, percon5ADA, percon5ABA, perincon5ABA, percon5ABA,
    percon5ABA, percon5ADA, perincon5ADA, perincon5ABA, percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA,
    perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, percon5ADA, percon5ADA, perincon5ABA, perincon5ADA,
    );
} else if(randomint > 60){
  timeline.push(
  	perincon5ADA, perincon5ABA, percon5ABA, percon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    percon5ADA, perincon5ABA, perincon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA,
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA,
    percon5ADA, percon5ADA, perincon5ABA, percon5ABA, perincon5ADA, percon5ABA, perincon5ABA, percon5ADA,   
    );
} else if(randomint > 50){
  timeline.push(
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA,
    percon5ABA, percon5ABA, perincon5ADA, perincon5ABA, percon5ADA, perincon5ABA, perincon5ADA, perincon5ADA,
    perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, perincon5ADA, percon5ABA, perincon5ABA, percon5ADA,
    percon5ADA, percon5ADA, perincon5ABA, perincon5ADA, percon5ABA, perincon5ABA, percon5ABA, percon5ADA,    
    );
} else if(randomint > 40){
  timeline.push(
  	perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA,
    perincon5ADA, percon5ABA, perincon5ABA, percon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    percon5ADA, percon5ADA, perincon5ABA, percon5ABA, perincon5ADA, perincon5ABA, percon5ABA, percon5ADA,    
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA,
    );
} else if(randomint > 30){
  timeline.push(
  	percon5ABA, percon5ABA, perincon5ADA, perincon5ABA, percon5ADA, percon5ADA, perincon5ABA, perincon5ADA,
	percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, percon5ABA, percon5ABA, perincon5ABA, percon5ADA,
    percon5ABA, percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, perincon5ABA, percon5ABA, percon5ADA,
percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA,
    );
} else if(randomint > 20){
  timeline.push(
  	percon5ABA, percon5ABA, perincon5ADA, perincon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA,
    percon5ADA, percon5ABA, perincon5ABA, percon5ABA, perincon5ADA, percon5ABA, perincon5ABA, percon5ADA,
    percon5ADA, percon5ADA, perincon5ABA, perincon5ADA, percon5ABA, percon5ADA, perincon5ADA, perincon5ABA,
    percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, perincon5ADA, perincon5ABA, percon5ABA, percon5ADA,
    );
} else if(randomint > 10){
  timeline.push(
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA, perincon5ABA, perincon5ADA, percon5ABA,
    perincon5ABA, percon5ADA, percon5ADA, percon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, perincon5ADA,
    percon5ADA, percon5ABA,  percon5ADA, perincon5ADA, perincon5ABA, perincon5ABA, percon5ABA, percon5ADA,
    percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    );
} else if(randomint > 0){
  timeline.push(
  	percon5ABA, perincon5ABA, perincon5ADA, percon5ADA, percon5ABA, percon5ABA, perincon5ADA, perincon5ABA,
    percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, perincon5ADA, perincon5ABA, perincon5ADA, percon5ABA,
    percon5ADA, percon5ABA,  percon5ADA, perincon5ADA, perincon5ABA, perincon5ABA, percon5ABA, percon5ADA,
    perincon5ABA, percon5ADA, percon5ADA, percon5ADA, percon5ABA, perincon5ABA, perincon5ADA, perincon5ADA,
    );
}
}

if(condition == 6){
randomint = Math.floor(Math.random()*110);

if(randomint > 100){
  timeline.push(
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    )
} else if(randomint > 90){
  timeline.push(
  	percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA,
    perincon6ADA, perincon6ABA, percon6ABA, percon6ADA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA,
    percon6ADA, percon6ADA, perincon6ABA, perincon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    percon6ADA, perincon6ADA, perincon6ABA, percon6ABA, perincon6ADA, percon6ABA, perincon6ABA, percon6ADA,
    );
} else if(randomint > 80){
  timeline.push(
  	perincon6ADA, percon6ABA, perincon6ABA, percon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    percon6ABA, percon6ADA, perincon6ADA, perincon6ABA, perincon6ADA, perincon6ABA, percon6ABA, percon6ADA,
    percon6ADA, percon6ADA, percon6ABA, perincon6ADA, percon6ADA, perincon6ABA, perincon6ABA, perincon6ADA,
    percon6ABA, percon6ABA, perincon6ADA, perincon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA,
    );
} else if(randomint > 70){
  timeline.push(
  	perincon6ADA, percon6ABA, perincon6ABA, percon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    perincon6ADA, perincon6ABA, percon6ABA, percon6ADA, percon6ADA, percon6ABA, perincon6ABA, perincon6ADA,
    percon6ABA, percon6ADA, perincon6ADA, perincon6ABA, percon6ADA, perincon6ADA, perincon6ABA, percon6ABA,
    perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, percon6ADA, percon6ADA, perincon6ABA, perincon6ADA,
    );
} else if(randomint > 60){
  timeline.push(
  	perincon6ADA, perincon6ABA, percon6ABA, percon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    percon6ADA, perincon6ABA, perincon6ADA, perincon6ADA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA,
    percon6ADA, percon6ADA, perincon6ABA, percon6ABA, perincon6ADA, percon6ABA, perincon6ABA, percon6ADA,   
    );
} else if(randomint > 50){
  timeline.push(
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA,
    percon6ABA, percon6ABA, perincon6ADA, perincon6ABA, percon6ADA, perincon6ABA, perincon6ADA, perincon6ADA,
    perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, perincon6ADA, percon6ABA, perincon6ABA, percon6ADA,
    percon6ADA, percon6ADA, perincon6ABA, perincon6ADA, percon6ABA, perincon6ABA, percon6ABA, percon6ADA,    
    );
} else if(randomint > 40){
  timeline.push(
  	perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA, perincon6ADA,
    perincon6ADA, percon6ABA, perincon6ABA, percon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    percon6ADA, percon6ADA, perincon6ABA, percon6ABA, perincon6ADA, perincon6ABA, percon6ABA, percon6ADA,    
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA,
    );
} else if(randomint > 30){
  timeline.push(
  	percon6ABA, percon6ABA, perincon6ADA, perincon6ABA, percon6ADA, percon6ADA, perincon6ABA, perincon6ADA,
	percon6ADA, perincon6ADA, perincon6ABA, perincon6ADA, percon6ABA, percon6ABA, perincon6ABA, percon6ADA,
    percon6ABA, percon6ADA, perincon6ADA, perincon6ABA, perincon6ADA, perincon6ABA, percon6ABA, percon6ADA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA,
    );
} else if(randomint > 20){
  timeline.push(
  	percon6ABA, percon6ABA, perincon6ADA, perincon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA,
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, perincon6ADA, percon6ABA, perincon6ABA, percon6ADA,
    percon6ADA, percon6ADA, perincon6ABA, perincon6ADA, percon6ABA, percon6ADA, perincon6ADA, perincon6ABA,
    percon6ADA, perincon6ADA, perincon6ABA, percon6ABA, perincon6ADA, perincon6ABA, percon6ABA, percon6ADA,
    );
} else if(randomint > 10){
  timeline.push(
    percon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA, perincon6ABA, perincon6ADA, percon6ABA,
    perincon6ABA, percon6ADA, percon6ADA, percon6ADA, perincon6ADA, perincon6ABA, perincon6ADA, perincon6ADA,
    percon6ADA, percon6ABA,  percon6ADA, perincon6ADA, perincon6ABA, perincon6ABA, percon6ABA, percon6ADA,
    percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    );
} else if(randomint > 0){
  timeline.push(
    percon6ADA, percon6ABA,  percon6ADA, perincon6ADA, perincon6ABA, perincon6ABA, perincon6ADA, percon6ADA,
    percon6ABA, perincon6ABA, perincon6ADA, percon6ADA, percon6ABA, percon6ABA, perincon6ADA, perincon6ABA,
    perincon6ABA, percon6ADA, percon6ADA, percon6ADA, perincon6ADA, perincon6ABA, percon6ABA, perincon6ADA,
    percon6ADA, percon6ABA, perincon6ABA, percon6ABA, perincon6ADA, perincon6ABA, perincon6ADA, percon6ABA,   
    );
}
}


var end = {
    type: 'instructions',
    pages: [ '<h2>Study Complete</h2>' +
    '<p>Thank you for participating!</p>' +
    '<p>This study aims to investigate audiovisual processing in combination with motor information.' +
     ' In particular, we are interested in how an ambiguous auditory stimulus can be recalibrated by a non-ambiguous visual stimulus in conjunction with motor processing.' +
     ' For example, if you were presented with an ambiguous sound between /ABA/ and /ADA/ paired with your own articulations or a face saying /ABA/, then you have perceived that sound as more like /ABA/, thus "recalibrating" your perception of that ambiguous sound.' +
     ' Later, during the auditory-only trials, you should have tended to experience a bias to hear the ambiguous sound as /ABA/. </p>' +
     '<p> In our study, we also sometimes put the articulation in opposition to the face.' +
     ' For example, we had you articulate /ABA/ paired with a face saying /ADA/. Here, there are two biases on that ambiguous sound pushing in opposite directions.' +
     ' We are interested to see how auditory-only responses would change after this conflict training. This research will help us clarify the link between audition and vision and the motor system in speech processing.</p>' +
  '<b>Click <i>next</i> for instructions on arranging compensation or to fill out the RPS form.</b>'],
    show_clickable_nav: true,
    button_label_next: "Next",
    allow_keys: false
}
timeline.push(end);

//IN TERMINAL: open -n -a /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --args --user-data-dir="/tmp/chrome_dev_test" --disable-web-security

      /* start the experiment */
    jsPsych.init({
        timeline: timeline, // plays timeline "trial"
        use_webaudio: false, // allows audio to play in browser
        show_preload_progress_bar: false, // hide preload progress bar,
        preload_video: ["video/VbA0.mp4", "video/VbA4.mp4", "video/VbA5.mp4", "video/VbA6.mp4", "video/VdA0.mp4", "video/VdA4.mp4", "video/VdA5.mp4", "video/VdA6.mp4"],
        preload_audio: ["audio/bd04.wav", "audio/bd04_minus.wav", "audio/bd04_plus.wav", "audio/bd05.wav", "audio/bd05_minus.wav", "audio/bd05_plus.wav", "audio/bd06.wav", "audio/bd06_plus.wav", "audio/bd06_minus.wav"],
                    exclusions: {
                        min_width: 800,
                        min_height: 600
                    },
        on_finish: function (data) {
          var resultJson = jsPsych.data.get().ignore('internal_node_id').ignore('time_elapsed'); // retrieves all data
          jatos.submitResultData(resultJson.csv(), jatos.startNextComponent); // ignore these columns when generating results
        },
        default_iti: 10
      });
    });
    </script>
  </html>